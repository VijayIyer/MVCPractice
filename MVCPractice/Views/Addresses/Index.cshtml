@*@model IEnumerable<MVCPractice.Address>
@using Newtonsoft.Json*@

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Index</h2>

<p>
    @Html.ActionLink("Create New","Create")
</p>
<div id="CreateView">
<table class="table" id="AddressTable" ng-app="app" ng-controller="AddressList">
    <tr>
        <th data-filterclause="" data-filtervalue="">
            <span>AddressLine1</span>
            <span style="float:right"><i class="glyphicon glyphicon-filter"></i></span>
        </th>
        @*<th data-filterclause="" data-filtervalue="">
            <span> @Html.DisplayNameFor(model => model.AddressLine2)</span>
            <span style="float:right"><i class="glyphicon glyphicon-filter"></i></span>
        </th>
        <th data-filterclause="" data-filtervalue="">
           <span>@Html.DisplayNameFor(model => model.City)</span> 
            <span style="float:right"><i class="glyphicon glyphicon-filter"></i></span>
        </th>
        <th>
            @Html.DisplayNameFor(model => model.StateProvince)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.CountryRegion)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.PostalCode)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.rowguid)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.ModifiedDate)
        </th>
        <th></th>*@
    </tr>


    <tr ng-repeat="item in model">
        <td>
           <span>{{item.AddressLine1}} - AddressLine1</span>
        </td>
    </tr>
        @*@<td>
            @Html.DisplayFor(modelItem => item.AddressLine2)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.City)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.StateProvince)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.CountryRegion)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.PostalCode)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.rowguid)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ModifiedDate)
        </td>
        <td>
          @Html.ActionLink("Edit","Edit",new { id = item.AddressID})|
            @Html.ActionLink("Details", "Details", new { id = item.AddressID })|
            @Html.ActionLink("Delete", "Delete", new { id = item.AddressID })|
              @Ajax.ActionLink("Edit", "Edit", new { id=item.AddressID },new AjaxOptions {UpdateTargetId = "DynamicView",InsertionMode = InsertionMode.ReplaceWith}) |
            @Ajax.ActionLink("Details", "Details", new { id=item.AddressID }, new AjaxOptions { UpdateTargetId = "DynamicView", InsertionMode = InsertionMode.ReplaceWith } ) |
            @Ajax.ActionLink("Delete", "Delete", new { id=item.AddressID }, new AjaxOptions { UpdateTargetId = "DynamicView", InsertionMode = InsertionMode.ReplaceWith })
        </td>*@

</table>
</div>
@section Scripts{
    
    <script>
        angular.module('app', []).controller('AddressList', ['$scope','$http', function ($scope,$http) {

            $scope.model = [];
            $http.get('/Addresses/GetAddresses').then(function (response) {
                if (response != null || response != "undefined") {
                    $scope.model = response.data;
                }
            });

        }]);
    </script>
    
    }